<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Offer Requested</title>
    <link href="../public/css/fragments.css" th:href="@{/css/fragments.css}" rel="stylesheet"/>
    <link href="../public/css/customersOrderDetails.css" th:href="@{/css/customersOrderDetails.css}" rel="stylesheet"/>
</head>

<body>
<div th:replace="~{fragments :: formField (currentpage='/')}"></div>

<div class="background">
    <div class="close-button-div">
        <a href="/customersAllOrdersPage">
            <button id="close-button">X</button>
        </a>
    </div>

    <div class="headline-and-order-status">

        <span id="headline">Carport (with customized measurements)</span>

        <div id="order_status">
            <span th:if="${#ctx.session.orderToShow.getStatus().toString().equals('CUSTOMER_ACCEPTED') || #ctx.session.orderToShow.getStatus().equals('READY_FOR_REVIEW')}"> FORESPØRGSEL PÅ TILBUD SENDT </span>
            <span th:if="${#ctx.session.orderToShow.getStatus().toString().equals('PRICE_PRESENTED')}"> TILBUD </span>
            <span th:if="${#ctx.session.orderToShow.getStatus().toString().equals('ORDER_PAID')}"> BESTILT OG BETALT </span>

        </div>

    </div>


    <div>

        <div class="carport-measurements-div">
            <div class="shed-no-shed-div">
                <span>Carport:</span>
            </div>
            <div class="carport-length-and-width-div">


                <div class="length-and-width-text-div">
                    <span id="length-text">Længde:</span>
                </div>
                <div class="length-and-width-div">
                    <span id="length" th:text="${#ctx.session.orderToShow.getCarport().getLength()}">tester</span>
                </div>

                <div class="length-and-width-text-div">
                    <span id="width-text">Bredde:</span>
                </div>
                <div class="length-and-width-div">
                    <span id="width" th:text="${#ctx.session.orderToShow.getCarport().getWidth()}">tester</span>
                </div>

            </div>

            <div class="shed-no-shed-div">
                <span th:if="${#ctx.session.orderToShow.getCarport().isShed()}">Skur:</span>
            </div>

            <div th:if="${#ctx.session.orderToShow.getCarport().isShed()}" class="carport-length-and-width-div">

                <div class="length-and-width-text-div">
                    <span th:if="${#ctx.session.orderToShow.getCarport().isShed()}"> Længde: </span>
                </div>
                <div class="length-and-width-div">
                    <span th:text="${#ctx.session.orderToShow.getCarport().getShed().getLength()}"></span>
                </div>

                <div class="length-and-width-text-div">
                    <span th:if="${#ctx.session.orderToShow.getCarport().isShed()}"> Bredde: </span>
                </div>
                <div class="length-and-width-div">
                    <span th:text="${#ctx.session.orderToShow.getCarport().getShed().getWidth()}"></span>
                </div>
            </div>

        </div>

        <div id="carport-blueprint-div">

            <p>Blueprint af din carport:</p>

            <div class="blueprint-div">
                <p>[svg tegning]</p>
            </div>

        </div>


        <div th:if="${#ctx.session.orderToShow.getStatus().toString().equals('PRICE_PRESENTED')}"
             class="price-and-pay-button-div">

            <div class="price-div">
                <span class="price-text">Pris: </span>
                <span class="price" th:text="${#ctx.session.orderToShow.getPrice()}"> 35.475,-</span>
            </div>

            <form class="pay-button-form" method="post">
                <button class="pay-button" type="submit" name="pay" th:value="${#ctx.session.orderToShow}"
                        formaction="/customerPaysForOrder"> Betal
                </button>
            </form>

        </div>

        <div th:if="${#ctx.session.orderToShow.getStatus().toString().equals('ORDER_PAID')}" class="order-paid-div">

            <form class="show-parts-list-button-form" method="post">
                <button th:if="${#ctx.showPartsList.equals('dontShow')}" class="show-parts-list-button" type="submit"
                        name="showPartsList" th:value="${#ctx.showPartsList}"
                        formaction="/showPartsList"> Vis stykliste
                </button>
                <button th:if="${#ctx.showPartsList.equals('show')}" class="show-parts-list-button" type="submit"
                        name="showPartsList" th:value="${#ctx.showPartsList}"
                        formaction="/showPartsList"> Skjul stykliste
                </button>

                <p class="partslist-text">Stykliste:</p>

            </form>

            <table th:if="${#ctx.showPartsList.equals('show')}" class="table-showing-partslist">

                <tr>
                    <th style="width: 7%">Antal:</th>
                    <th style="width: 5%"> - </th>
                    <th style="width: 11%">Carportdel:</th>
                    <th style="width: 44%">Materiale:</th>
                    <th style="width: 10%">Længde:</th>
                    <th style="width: 12%">Pris pr. styk:</th>
                    <th style="width: 16%">Samlet pris:</th>

                </tr>
                <tr th:each="item: ${#ctx.session.orderToShow.getCarport().getItemList().getItemList()}">
                    <td th:text="${item.quantity}"></td>
                    <td th:text="${item.unit}"></td>
                    <td th:text="${item.carport_part}"></td>
                    <td th:text="${item.description}"></td>
                    <td th:text="${item.length}"></td>
                    <td th:text="${item.price_pr_unit}"></td>
                    <td th:text="${#ctx.session.orderToShow.getPricePerQuantityOfItem().get(item)}"></td>

                </tr>
            </table>

        </div>

        <div class="order-paid-price-div" th:if="${#ctx.session.orderToShow.getStatus().toString().equals('ORDER_PAID')}">
            <span class="order-paid-price-text">Pris: </span>
            <span class="order-paid-price" th:text="${#ctx.session.orderToShow.getPrice()}"> 35.475,-</span>
        </div>


    </div>

</div>

</body>
</html>